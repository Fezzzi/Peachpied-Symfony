'use strict';(function(window, $, Routing, swal) {    class ProfileApp {        constructor($wrapperAchvsList, $wrapperAchvsPage, $wrapperGallery, $wrapperChallenges, achvs, points, allow_edit){            this.$achvsList = $wrapperAchvsList;            this.$achvsPage = $wrapperAchvsPage;            this.$gallery = $wrapperGallery;            this.$challenges = $wrapperChallenges;            this.achvs = achvs;            this.ROWS = 7;            this.page = 0;            this.fillLevel(points);            this.initAchvs();            this.listAchvs();            this.$challenges.on(                'mouseenter',                '.js-completed-challenge',                this.showChallengeText.bind(this)            );            this.$challenges.on(                'mouseleave',                '.js-completed-challenge',                this.showChallengeImg.bind(this)            );            this.$gallery.on(                'click',                '.js-show-image',                this.showImage.bind(this)            );            this.$achvsPage.on(                'click',                '.js-page-left',                this.pageLeft.bind(this)            );            this.$achvsPage.on(                'click',                '.js-page-right',                this.pageRight.bind(this)            )        }        pageLeft(){            if(this.page > 0) {                --this.page;                this.$achvsList.find('.js-achvs-row').remove();                this.listAchvs();            }        }        pageRight(){            if((this.page + 1) * this.ROWS < this.achvs.length) {                ++this.page;                this.$achvsList.find('.js-achvs-row').remove();                this.listAchvs();            }        }        fillLevel(points){            for(let level in levels){                if(points < levels[level]) {                    $('.js-level')[0].innerHTML = '<strong class="highlighted">' + level + '</strong>';                    return;                }            }        }        showImage(e){            let $span = $(e.currentTarget)[0];            let img = '<img style="max-width: 100%; background-color: #EEEEEE" src="' + $span.src + '" ' +                                'onerror="imageError(this)">';            swal({                html: img,                width: 'auto',                showConfirmButton: false,            });            $('.swal2-container').attr("onclick", 'swal.closeModal();');        }        showChallengeImg(e){            let $span = e.currentTarget;            $($span).find('strong').hide();            $($span).find('img').show();        }        showChallengeText(e){            let $span = e.currentTarget;            $($span).find('img').hide();            $($span).find('strong').show();        }        initAchvs(){            let newAchvs = [];            let index = 0;            for(let key in this.achvs){                newAchvs[index] = this.achvs[key];                ++index;            }            this.achvs = newAchvs;        }        listAchvs(){            let $page = this.$achvsPage.find('.js-page');            let string = "";            $page[0].innerHTML = this.page + 1;            for(let i = 0; i < this.ROWS && (this.page * this.ROWS) + i < this.achvs.length; ++i){                let idx = (this.page * this.ROWS) + i;                string += `                    <div style="margin-top: 10px" class="js-achvs-row">                        <img src="assets/images/achievement` + this.achvs[idx]['type'] + `.png" style="background-color: #EEEEEE"                             class="img-rounded" width="50" height="50" onerror="imageError(this)">                        <h3 style="display: inline; margin-left: 10px"><strong>` + this.achvs[idx]['name'] + `</strong></h3>                        <h4 class="pull-right" style="display: inline"> [` + this.achvs[idx]['date'] + `] </h4>                    </div>`;            }            if(this.achvs.length > this.ROWS)                $page.show();            else                $page.hide();            if(this.page > 0)                $('.js-page-left').show();            else                $('.js-page-left').hide();            if((this.page + 1) * this.ROWS < this.achvs.length)                $('.js-page-right').show();            else                $('.js-page-right').hide();            this.$achvsList.append(string).hide().slideDown('medium');        }    }    window.ProfileApp = ProfileApp;})(window, jQuery, Routing, swal);